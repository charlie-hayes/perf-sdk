syntax = "proto3";

// See README.md in this directory for a description of these.
package protocol;
option csharp_namespace = "Couchbase.Grpc.Protocol";
option java_package = "com.couchbase.grpc.sdk.protocol";
option go_package = "github.com/couchbaselabs/transactions-fit-performer/protocol";
option java_multiple_files = true;

import "sdk_basic.proto";

message CommandInsert {
  BucketInfo bucketInfo = 3;
  string contentJson = 4;
}

message CommandGet {
  // PERF_PERFORMER: this can start with "__doc_X", in which case a UUID for XXX should be generated or used automatically by
  // the performer.  E.g. the first use of "__doc_0" in a transaction should create a new UUID for 0, and then subsequent uses
  // of "__doc_0" in the same transaction should reuse that UUID.  X will always be an integer.
  string docId = 1;

  BucketInfo bucketInfo = 2;
}

message SdkCommand {
  oneof command {
    CommandInsert insert = 1;
    CommandGet get = 2;
  }
}

enum SdkException {
  //TODO: Need a more comprehensive list of exceptions that can occur
  NO_EXCEPTION_THROWN = 0;
  EXCEPTION = 1;
  EXCEPTION_UNKNOWN = 2;
}

enum ExternalException {
  Unknown = 0;
}